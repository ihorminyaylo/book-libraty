<div ng-controller="ReviewsIndex as r">
	<h1 class="ui header" align="center">List of reviews</h1>
<table class="table table-striped">
	<thead>
	<tr>
		<th>Stars</th>
		<th>Rating</th>
		<th>Books</th>
	</tr>
	</thead>
	<tbody ng-repeat="review in r.reviewDetails">
	<tr ng-if="review.rating >  0">
		<td><b>{{review.rating}} stars</b></td>
		<td><span uib-rating ng-model="review.rating" max="5" read-only="true"></span></td>
		<td><a href="#!/books/rating/{{review.rating}}">[{{review.count}} books]</a></td>
	</tr>
	</tbody>
</table>
	<h1 class="ui header" align="center">
			<label >TOP books</label>
			<input type="number" name="r.count" class="form-control" ng-model="r.count" ng-value="r.count">
			<button class="btn btn-primary" type="button" ng-click="r.findTop(r.count)">Search</button>
	</h1>
	<table class="table table-striped">
		<thead>
		<tr>
			<th class="single line">#</th>
			<th>
				<a ng-click="r.sortParams('name')"> Name
					<span ng-show="r.sortType === 'name' && r.sortReverse === 'down'" class="glyphicon glyphicon-chevron-down"></span>
					<span ng-show="r.sortType === 'name' && r.sortReverse === 'up'" class="glyphicon glyphicon-chevron-up"></span>
				</a>
			</th>
			<th><a ng-click="r.sortParams('publisher')"> Publisher
				<span ng-show="r.sortType === 'publisher' && r.sortReverse === 'down'" class="glyphicon glyphicon-chevron-down"></span>
				<span ng-show="r.sortType === 'publisher' && r.sortReverse === 'up'" class="glyphicon glyphicon-chevron-up"></span>
			</a></th>
			<th><a ng-click="r.sortParams('year_published')"> Year published
				<span ng-show="r.sortType === 'year_published' && r.sortReverse === 'down'" class="glyphicon glyphicon-chevron-down"></span>
				<span ng-show="r.sortType === 'year_published' && r.sortReverse === 'up'" class="glyphicon glyphicon-chevron-up"></span>
			</a></th>
			<th>
				Authors
			</th>
			<th><a ng-click="r.sortParams('average_rating')"> Rating
				<span ng-show="r.sortType === 'average_rating' && r.sortReverse === 'down'" class="glyphicon glyphicon-chevron-down"></span>
				<span ng-show="r.sortType === 'average_rating' && r.sortReverse === 'up'" class="glyphicon glyphicon-chevron-up"></span>
			</a></th>
			<th>Action</th>
		</tr>
		</thead>
		<tbody>
		<tr ng-repeat="book in r.books">
			<td>
				{{$index + 1}}
			</td>
			<td class="single line">
				{{book.name}}
			</td>
			<td>
				{{book.publisher}}
			</td>
			<td>
				{{book.yearPublished}}
			</td>
			<td>
				<div ng-repeat="author in book.authors">
					{{author.firstName}} {{author.secondName}}
				</div>
			</td>
			<td>
				<span uib-rating ng-model="book.averageRating" max="5" read-only="true" uib-tooltip="{{book.averageRating}}"></span>
			</td>
			<td>
				<button type="button" class="btn btn-primary" ng-click="r.addReview(book)">
					ADD REVIEW <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
				</button>
				<button type="button" class="btn btn-warning" ng-click="r.edit(book)">
					EDIT <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
				</button>
				<button type="button" class="btn btn-danger" ng-click="r.delete(book)">
					DELETE <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
				</button>
			</td>
		</tr>
		</tbody>
		<tfoot>
		</tfoot>
	</table>
</div>